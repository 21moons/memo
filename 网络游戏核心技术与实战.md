# 0 [快速入门]网络游戏编程

## 0.2 套接字编程入门--处理多个并发连接, 追求性能

## 0.2.6 单线程, 非阻塞, 事件驱动--使用 select 函数进行轮询

```c
int sock = socket(PF_INET, SOCK_STREAM);
bind(sock, addr);
listen(sock);

allsock.add(sock);
while (1) {
    result = select(sock);
    if(result > 0) {
        int new_sock = accept(sock, &addr);
        allsock.add(new_sock);
    }

    foreach(sock = allsock){
        result = select(sock);
        if(result > 0) {
            char buf[100];
            size_t size = read(new_sock, buf, 100);

            if(size == 0) {
                close(new_sock);
            } else {
                write(new_sock, buf, size);
            }
        }
    }
}
```

## 0.2.7 网络游戏输入输出的特点--单线程, 事件驱动, 非阻塞

## 0.2.9 充分发挥性能和提高开发效率--从实现语言到底层结构

软件性能与开发效率是矛盾的

C/C++ > java > 脚本语言

<p align="left"><font size=2>表 0.1 主要的编程语言与吞吐量</font></p>

| 语言 | 吞吐量 | 特性 |
| ------| ------ | ------ |
| C/C++ | 100 | 静态类型, 本地代码 |
| Java/C# | 1 ~ 10 | 静态类型, VM, 字节码 |
| Ruby/Python | 0.1 ~ 1 | 动态类型 |

对于 CPU 密集型应用程序, Java 的运行速度与 C 近似.
但是对于 IO 密集型应用程序, 因为 Java 虚拟机每次进行系统调用, 都会进行缓存溢出检查和异常对象处理, 所以运行速度比 C 慢上 10 倍左右.

动态类型语言则比 Java 更慢, 因为每次进行一些处理时, 对象调用的方法都可能会发生变化, 所以每次调用前都必须进行检查确认.

Go 语言是一种静态的, 本地执行的语言, 它具有垃圾回收机制, 程序员可以在代码的不同部分中选择类型化的强度.

## 0.2.10 发挥多核服务器的性能

在 Linux 上, 平均每个 CPU 内核一秒内可以执行 10 万~20 万次上下文切换.(这里的上下文切换指的是操作系统调度单元的切换)