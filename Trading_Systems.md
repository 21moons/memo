Trading Systems
A new approach to system development and
portfolio optimisation


#Part I: 交易系统开发&评估实践指导

##Chapter 1: 什么是交易系统? 
交易系统就是一个自动定义入场点和出场点的，不包含任何人为介入因素的规则集合。
因为交易规则并没有定义交易时间和交易地点，这样使得交易系统是静态可测试的。
通过历史数据，我们可以在一定程度上计算交易系统的可信度。
如果我们向已有规则中添加资金管理规则和投资组合规则，我们就拥有了一个交易策略，或者换句话说，就是对市场进行完全自动化模拟。

我们提到的资金管理并不是我们通常认为的风险管理，而是如何去止损和止盈。

###1.1 简易交易系统示例
* 入场规则
买入2份最近20天内价格创最高的合约;
卖空2份最近20天内价格创新低的合约;
* 离场规则
如果 marketposition = 1，那么在最接近 avgtruerange(14) 的价位卖出平仓;
如果 marketposition = -1，那么在最接近 avgtruerange(14) 的价位买入平仓。

quantitative traders 量化交易者

###1.2 为什么你需要交易系统
统计结果毫无疑问地表明只有百分之几的交易者能够年复一年地打败市场。大部分是私人和机构交易者迟早会破产。如果你不属于幸运的随意交易者，那么为了生存，唯一的选择就是使用交易系统。如果你购买了这本书，你很可能并不是一个成功的自由交易者。按照我的经验，成功的自主交易者拥有天生的直觉，能够依靠本能预测市场动向。与之对应的是，有许多成功的基金经理，机构和私募交易者利用预设的交易策略和投资方法获利。如果有人认为交易系统可以很容易地战胜所有的交易中的阻碍，那么这是对交易系统的一种误解。一方面交易系统可以帮助交易者击败市场，另一方面它也会引入一些新的问题。

首先, 如果交易者在勇气方面有些问题，面对机会时没有足够的魄力及时行事。这种情况下交易系统并非一个完美的解决方案。正如 Larry Williams 所说，“trading systems work, system traders do not”。对应一个有系统的交易者而言，没有什么比忽略交易信号更大的恶行，Bill Eckhardt 写到：

*如果你做了一笔坏交易，你还有资金管理，你还有一大堆东西能够帮助你，做一笔坏交易真的没有你想的这么严重。但是，如果你错过了一笔好的交易，不要找任何理由。如果你遇到了一笔注定盈利的交易, 而你却错过了它，你注定会在这个游戏中完蛋。*

其次，为了信任交易系统，特别是在利润回撤抹去交易者对交易系统能力的信心时，一定要做大量的研究和统计工作，这并不是每个人都能够做到的。开发，实施，测试和评估一个交易系统并不是一个简单的事情。

最后，影响自由交易的许多因素同样影响着系统性交易，例如 缺乏足够的启动资金，投资组合多样化的可能性，全职，24小时，敬业。

更重要的是，我们可以说做交易并不像在一个理性的企业工作，你做出计划，得出结论，一切可以用逻辑的方式来解释。 恐惧和贪婪用一种大脑无法掌控的方式操纵价格。 当然有一些幸运交易者可以凭直觉地打败市场，但在这些情况下，他们并不能清晰的解释他们为什么买或卖。 如果这一切都是真的，意味着你需要一个不理智和不合逻辑的工具来进入和退出市场，这东西不能让你完全理解，而且违反直觉。 通常情况下，那些你认为是不合逻辑的，或者只会导致失败的信号会让你成为赢家。

使用机械的交易系统意味着你需要放弃自己持有的关于金融的信念，放弃所有让你“感觉良好”的交易方式：通常每个人买入下跌中的合约会感觉良好，买入价格创新高的合约则会感觉不舒服，但有很大概率是后者的方法更好。 测试交易系统，意味着数字的野蛮力量将会强加于你，让你感觉倍受约束。 成为一名完全机械的交易者意味着与自己搏斗。 这是赢利的唯一途径，除非你是一个幸运的劫匪，日复一日地赚钱，但却不知道如何赚钱。


###1.3 交易系统的相关知识

主观技术分析(subjective technical analysis)和客观技术分析(objective technical analysis)之间有很大的区别。

客观的技术分析方法是定义清晰的，可重复的，能够产生明确交易信号的过程。这使得它们可以用计算机程序来实现，并且可以使用历史数据做回测。 同时，回测产生的结果可以通过严格的评估来做定量分析。主观技术分析方法没有明确的分析过程。由于其天生的模糊性，必须依赖分析师的私人解释。这种特性妨碍了电脑化，回测和客观的性能评估。换句话说，我们没有方法能确认或否定主观方法的功效。因为这个原因，他们很难被证实是有效的。

因为其模糊性和缺乏科学的方法，主观技术分析在学术圈和严肃的市场从业人员中并没有获得良好的声誉。 要成为一个图表或技术分析师，而不是投资组合经理，有一套个人的技术分析绝活可能是金融业中最好的跳板。关于为什么人们会相信奇怪的东西，如教条，信仰，神话和轶事，已经有很多的社会学和心理学的文献来解释，同样这也是使用科学方法推导反而更容易错过好的科学技术分析的原因。 当然，我并不是要在这里讲授关于科学哲学，我只是想简要提醒读者什么是科学知识。科学知识是经验的，是基于对现实的观察：

*技术分析的实质是统计推断。它试图从历史数据中归纳出模式，规则等形式并进行概括，然后推断他们的未来。*

因此，技术分析利用统计推断工具，从单个样本开始观察，目的是评估整个人群的统计学属性。 通过这种方式，技术分析是可以量化的，就像统计学一样。此外，技术分析和科学一样，试图通过变量之间的函数关系来预测未来。 如果一个变量变了，那么因变量会随之变化。技术分析中的规则对应统计学中的函数，这里函数是有一定概率的。科学技术分析和统计学之间没有任何障碍，那些不喜欢主观技术分析的人提出的疑惑突然消失了。定量技术分析借用了应用科学中的典型分析方法：由牛顿发起并由波普尔推广的假设 - 演绎方法。该假设演绎法有五个阶段：
1. 观察。系统开发人员，通过持续观察金融市场上的日内波动及日间波动，设计变量之间的关系，例如当天交易量和收盘价之间的关联，或者指数和第二天开盘价之间的关联。
2. 假设。假设来自系统开发人员的创新思维 - 一个智力火花，其中的起源无法得知。系统开发人员必须清晰的知道他的假设不是来源于分析样本的特殊性，而是从全部数据中推演出来，对其中的大部分数据都是适用的。
3. 预测。如果这种关系是真的，那么可以依据假设来构建一个条件命题或一个预测，“如果这个假设确实是真实的，预测将准确的告诉我们可以在新的集合中观察到什么”。
4. 验证。系统开发人员验证预测在新集合中是否成立。
5. 结论。系统开发人员，通过使用统计推断工具(例如信任区间和假设测试)，将通过衡量实际观察结果与预测是否一致，确认假设是否成立。
这个过程与化学或生物学等应用科学中用到的科学评估方法没有任何区别。


##Chapter 2: 设计, 测试, 优化和评估一个交易系统 

###2.1 设计

交易系统从一个像创业愿景一样的想法开始。 创新是介于创意和幻想之间的一类东西，但是想法能否成为现实则取决于你为它奉献了多少时间。 有些系统交易员说一个关于交易系统的好主意是在你最不期待的时候出现的，但是与优秀交易者聊天很好会有些帮助，强烈建议你参加研讨会，大会和专业交易者之间的聚会。即使能够亲眼看到自由交易如何交易也是有用的。不幸的是，创新并没有确定的道路，但下面是
提示可以促使你走出想象的边界。

####开始

书单：
1. Traders www.traders-mag.co.uk
2. Active Trader www.activetradermag.com
3. Futures www.futuresmag.com
4. The Technical Analyst www.technicalanalyst.co.uk
5. Technical Analysis of Stocks & Commodities www.traders.com

TradeStation 论坛
“System Traders and Development Club” (STAD)

####编程目标

一个系统由一个入场公式，一个离场公式和一个资金管理公式组成。 离场公式与 “风险管理” 有关，即初始止损，追踪止损，目标退出，通俗一点来讲就是我们承担多少风险以及在每一笔交易如何承担风险。 “资金管理”关心的是我们在每笔交易中投资多少，就是我们买或卖多少股票或期货合约。 系统交易的初学者不愿意相信的是，只要积极地使用杠杆和资金管理技术，回报就会是惊人的，换句话来说，如果没有合适的资金和风险管理工具，即使交易系统优秀的令人屏息，也不会成为可行的投资工具。

####交易时机
期货价格系列没有任何问题, 股票要考虑回购，分红，增发

###2.2 测试
####市场数据的重要性

####回测时间长度

文献指出，一个交易系统，为了确保健壮性和一致性，在多时段多市场测试(multi-period multi-market test)中必须有一定的成功率。
一些机械交易者(mechanical traders)声称，支持多市场的交易规则是不存在的，因为交易系统有自己的个性，交易系统只能适合部分而非全部市场。如果多市场测试是指在许多不同的市场 (债券，股票，商品，货币，股票，等等) 表现的都一样好，从这个角度来讲，能够通过多市场测试的系统确实很少。我们与这些交易者看法一致 - 拥有20年的行业经验，今天的我们称得上是屈指可数的真正多市场交易系统之一。

####规则复杂度和自由度


###2.3 交易系统的预测能力
####最优解
####走向分析
####健壮性


###2.4 交易系统的评估
What to look for in an indicator 27
Average trade 28
Percentage of profitable trades 28
Trading Systems
iv
Profit factor 30
Drawdown 30
Time averages 31
RINA Index 32
###2.5 结论
